<?xml version="1.0" encoding="UTF-8"?>
<jobs xmlns="http://www.demandware.com/xml/impex/jobs/2015-07-01">
    <job job-id="OrderCleanUp">
        <description>Clean up exported VCN orders and remove sensitive card data</description>
        <parameters/>
        <flow>
            <context site-id="RefArch"/>
            <step step-id="execute" type="custom.OrderCleanUp" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2025-02-12Z</date>
                <time>10:00:00.000Z</time>
            </run-once>
        </triggers>
    </job>

    <job job-id="RecurringOrders">
        <description/>
        <parameters/>
        <flow>
            <context site-id="RefArch"/>
            <step step-id="createOrder" type="custom.RecurringOrders" enforce-restart="false">
                <description/>
                <parameters/>
            </step>
        </flow>
        <rules>
            <on-running runtime-threshold="60m" enabled="false">
                <mark-job-as-hanging/>
            </on-running>
        </rules>
        <triggers>
            <run-once enabled="false">
                <date>2025-02-12Z</date>
                <time>10:00:00.000Z</time>
            </run-once>
        </triggers>
    </job>

	<job job-id="DeleteWebhookNotification">
        <description>Deletes the Klarna webhook notifications</description>
        <parameters/>
        <flow>
            <context site-id="RefArch"/>
            <step step-id="deleteWebhookNotification" type="custom.deleteWebhookNotification" enforce-restart="false">
                <description>Deletes the Klarna webhook notification</description>
                <parameters>
                    <parameter name="ExpiryDays">30</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2025-09-22Z</date>
                <time>12:49:00.000Z</time>
            </run-once>
        </triggers>
    </job>

	<job job-id="CreateWebhook">
        <description>Creates Klarna Webhook for the site.</description>
        <parameters/>
        <flow>
            <context site-id="RefArch"/>
            <step step-id="CreateWebhook" type="custom.CreateWebhook" enforce-restart="false">
                <description>Retrieves/Creates a signing key and activates the Klarna webhook notification</description>
                <parameters>
                    <parameter name="EventTypes">payment.request.state-change.completed</parameter>
                </parameters>
            </step>
        </flow>
        <rules/>
        <triggers>
            <run-once enabled="false">
                <date>2025-09-17Z</date>
                <time>06:16:00.000Z</time>
            </run-once>
        </triggers>
    </job>

</jobs>
